version: '3.8'

services:
  # Service 1: The Python Backend
  backend:
    build: ./backend        # Tells Docker to look in the 'backend' folder
    container_name: neo_backend
    ports:
      - "8000:8000"         # Maps PC port 8000 to Container port 8000
    env_file:
      - ./backend/.env      # Loads your API keys automatically
    volumes:
      - ./backend:/app      # Syncs code so you don't have to rebuild on every change

  # Service 2: The React Frontend
  frontend:
    build: ./frontend       # Tells Docker to look in the 'frontend' folder
    container_name: neo_frontend
    ports:
      - "5173:5173"         # Maps PC port 5173 to Container port 5173
    depends_on:
      - backend             # Wait for backend to start first
    volumes:
      - ./frontend:/app     # Syncs code changes
      - /app/node_modules   # Keeps node_modules inside the container safe